From 0414ae2d40a64f0afb30d8479962592fa06942f1 Mon Sep 17 00:00:00 2001
From: vgdn1942 <vgdn1942@gmail.com>
Date: Mon, 19 Jul 2021 20:51:55 +0300
Subject: [PATCH] Disable Google Messages

---
 .../vendor_allowed_personal_apps_org_owned_device.xml  |  1 -
 .../res/values/vendor_required_apps_managed_device.xml |  1 -
 .../res/values/vendor_required_apps_managed_user.xml   |  1 -
 overlay/GmsConfigOverlayComms/Android.mk               | 10 ----------
 overlay/GmsConfigOverlayComms/AndroidManifest.xml      |  6 ------
 overlay/GmsConfigOverlayComms/res/values/config.xml    | 10 ----------
 products/google_comms_suite.mk                         |  6 +++---
 7 files changed, 3 insertions(+), 32 deletions(-)
 delete mode 100644 overlay/GmsConfigOverlayComms/Android.mk
 delete mode 100644 overlay/GmsConfigOverlayComms/AndroidManifest.xml
 delete mode 100644 overlay/GmsConfigOverlayComms/res/values/config.xml

diff --git a/overlay/GmsConfigOverlayCommon/res/values/vendor_allowed_personal_apps_org_owned_device.xml b/overlay/GmsConfigOverlayCommon/res/values/vendor_allowed_personal_apps_org_owned_device.xml
index 8654dbc..980e77b 100644
--- a/overlay/GmsConfigOverlayCommon/res/values/vendor_allowed_personal_apps_org_owned_device.xml
+++ b/overlay/GmsConfigOverlayCommon/res/values/vendor_allowed_personal_apps_org_owned_device.xml
@@ -5,7 +5,6 @@
         <item>com.android.vending</item> <!-- Google Play -->
         <item>com.google.android.gms</item> <!-- Required by Play -->
         <item>com.google.android.apps.wellbeing</item> <!-- Digital Wellbeing -->
-        <item>com.google.android.apps.messaging</item> <!-- Google Messenger for SMS -->
         <item>com.google.android.setupwizard</item> <!-- Google SetupWizard to finish DO provisioning properly -->
     </string-array>
 </resources>
diff --git a/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_device.xml b/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_device.xml
index 28e9440..f857def 100644
--- a/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_device.xml
+++ b/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_device.xml
@@ -5,7 +5,6 @@
         <item>com.android.vending</item> <!-- Google Play -->
         <item>com.google.android.gms</item> <!-- Required by Play -->
         <item>com.google.android.apps.wellbeing</item> <!-- Digital Wellbeing -->
-        <item>com.google.android.apps.messaging</item> <!-- Google Messenger for SMS -->
         <item>com.google.android.setupwizard</item> <!-- Google SetupWizard to finish DO provisioning properly -->
     </string-array>
 </resources>
diff --git a/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_user.xml b/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_user.xml
index 5cd6e2d..7ef5c77 100644
--- a/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_user.xml
+++ b/overlay/GmsConfigOverlayCommon/res/values/vendor_required_apps_managed_user.xml
@@ -6,6 +6,5 @@
         <item>com.android.vending</item> <!-- Google Play -->
         <item>com.google.android.gms</item> <!-- Required by Play -->
         <item>com.google.android.apps.wellbeing</item> <!-- Digital Wellbeing -->
-        <item>com.google.android.apps.messaging</item> <!-- Google Messenger for SMS -->
     </string-array>
 </resources>
diff --git a/overlay/GmsConfigOverlayComms/Android.mk b/overlay/GmsConfigOverlayComms/Android.mk
deleted file mode 100644
index d09da59..0000000
--- a/overlay/GmsConfigOverlayComms/Android.mk
+++ /dev/null
@@ -1,10 +0,0 @@
-###############################################################################
-# GmsConfigOverlayComms
-LOCAL_PATH:= $(my-dir)
-
-include $(CLEAR_VARS)
-LOCAL_PACKAGE_NAME := GmsConfigOverlayComms
-LOCAL_PRODUCT_MODULE := true
-LOCAL_RESOURCE_DIR := $(LOCAL_PATH)/res
-LOCAL_SDK_VERSION := current
-include $(BUILD_RRO_PACKAGE)
diff --git a/overlay/GmsConfigOverlayComms/AndroidManifest.xml b/overlay/GmsConfigOverlayComms/AndroidManifest.xml
deleted file mode 100644
index 0006abb..0000000
--- a/overlay/GmsConfigOverlayComms/AndroidManifest.xml
+++ /dev/null
@@ -1,6 +0,0 @@
-<manifest xmlns:android="http://schemas.android.com/apk/res/android"
-    package="com.google.android.overlay.gmsconfig.comms"
-    android:versionCode="1"
-    android:versionName="1.0">
-    <overlay android:targetPackage="android" android:priority="0" android:isStatic="true" />
-</manifest>
diff --git a/overlay/GmsConfigOverlayComms/res/values/config.xml b/overlay/GmsConfigOverlayComms/res/values/config.xml
deleted file mode 100644
index 47071ed..0000000
--- a/overlay/GmsConfigOverlayComms/res/values/config.xml
+++ /dev/null
@@ -1,10 +0,0 @@
-<?xml version="1.0" encoding="utf-8"?>
-<resources xmlns:xliff="urn:oasis:names:tc:xliff:document:1.2">
-    <!-- The name of the package that will hold the dialer role by default. -->
-    <!--
-    <string name="config_defaultDialer" translatable="false">com.google.android.dialer</string>
-    -->
-
-    <!-- The name of the package that will hold the SMS role by default. -->
-    <string name="config_defaultSms" translatable="false">com.google.android.apps.messaging</string>
-</resources>
diff --git a/products/google_comms_suite.mk b/products/google_comms_suite.mk
index c604533..4898f85 100644
--- a/products/google_comms_suite.mk
+++ b/products/google_comms_suite.mk
@@ -2,9 +2,9 @@
 
 PRODUCT_PACKAGES += \
     privapp_permissions_google_comms_suite \
-    CarrierServices \
-    GmsConfigOverlayComms \
-    Messages
+    CarrierServices
 
+#    GmsConfigOverlayComms \
+#    Messages \
 #    GoogleContacts \
 #    GoogleDialer \
-- 
2.20.1

