From 72411c632dbf9614a1249885fa6de6c4a33ecbed Mon Sep 17 00:00:00 2001
From: vgdn1942 <vgdn1942@gmail.com>
Date: Mon, 23 Aug 2021 15:36:22 +0300
Subject: [PATCH] Append device name to lineage version

Change-Id: I11be34c9ae890905b5b011ccf344be61105379b0
---
 .../LineageVersionDetailPreferenceController.java  | 14 ++++++++++++--
 1 file changed, 12 insertions(+), 2 deletions(-)

diff --git a/src/com/android/settings/deviceinfo/firmwareversion/LineageVersionDetailPreferenceController.java b/src/com/android/settings/deviceinfo/firmwareversion/LineageVersionDetailPreferenceController.java
index 3cd42a77ab..af7f1237c3 100644
--- a/src/com/android/settings/deviceinfo/firmwareversion/LineageVersionDetailPreferenceController.java
+++ b/src/com/android/settings/deviceinfo/firmwareversion/LineageVersionDetailPreferenceController.java
@@ -43,6 +43,7 @@ public class LineageVersionDetailPreferenceController extends BasePreferenceCont
     private static final int ACTIVITY_TRIGGER_COUNT = 3;
 
     private static final String KEY_LINEAGE_VERSION_PROP = "ro.lineage.version";
+    private static final String KEY_DEVICE_VERSION_PROP = "ro.product.device";
 
     private static final String PLATLOGO_PACKAGE_NAME = "org.lineageos.lineageparts";
     private static final String PLATLOGO_ACTIVITY_CLASS =
@@ -77,8 +78,17 @@ public class LineageVersionDetailPreferenceController extends BasePreferenceCont
 
     @Override
     public CharSequence getSummary() {
-        return SystemProperties.get(KEY_LINEAGE_VERSION_PROP,
-                mContext.getString(R.string.unknown));
+        if (SystemProperties.get(KEY_LINEAGE_VERSION_PROP,
+                mContext.getString(R.string.unknown)).equals(mContext.getString(R.string.unknown)) &&
+                SystemProperties.get(KEY_DEVICE_VERSION_PROP,
+                mContext.getString(R.string.unknown)).equals(mContext.getString(R.string.unknown))) {
+            return mContext.getString(R.string.unknown);
+        } else if (SystemProperties.get(KEY_DEVICE_VERSION_PROP,
+                mContext.getString(R.string.unknown)).equals(mContext.getString(R.string.unknown))) {
+            return SystemProperties.get(KEY_LINEAGE_VERSION_PROP);
+        } else {
+            return /* SystemProperties.get(KEY_LINEAGE_VERSION_PROP) + */ SystemProperties.get(KEY_DEVICE_VERSION_PROP);
+        }
     }
 
     @Override
-- 
2.20.1

