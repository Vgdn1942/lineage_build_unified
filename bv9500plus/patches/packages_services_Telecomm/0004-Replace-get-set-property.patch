From a41f4de7c15f986da87ef16610206fb346dc2264 Mon Sep 17 00:00:00 2001
From: vgdn1942 <vgdn1942@gmail.com>
Date: Thu, 5 Aug 2021 19:20:07 +0300
Subject: [PATCH] Replace get/set property

Change-Id: Id88167ff0d0f8031cb7f980384379f6edf9a1814
---
 .../android/server/telecom/stats/StatServer.java | 16 ++++++++--------
 1 file changed, 8 insertions(+), 8 deletions(-)

diff --git a/src/com/android/server/telecom/stats/StatServer.java b/src/com/android/server/telecom/stats/StatServer.java
index f8c9ae3f..c1682479 100644
--- a/src/com/android/server/telecom/stats/StatServer.java
+++ b/src/com/android/server/telecom/stats/StatServer.java
@@ -4,6 +4,7 @@ import android.content.Context;
 import android.provider.Settings;
 import android.os.AsyncTask;
 import android.os.Build;
+import android.os.SystemProperties;
 import android.util.Log;
 
 import java.io.BufferedReader;
@@ -32,13 +33,12 @@ public class StatServer {
     private String google_property = "ro.com.google.gmsversion";
     private String lineage_property = "ro.lineage.version";
 
-    private String id_build = System.getProperty(build_property, "none");
-    private String id_stats = System.getProperty(stats_property, "false");
-    private String id_google = System.getProperty(google_property, "none");
+    private String id_build = SystemProperties.get(build_property, "none");
+    private String id_stats = SystemProperties.get(stats_property, "false");
+    private String id_google = SystemProperties.get(google_property, "none");
     private String android_id = ("7.0_r4".equals(id_google)) ? "true" : "false"; // deprecated
     //private String build_id = Build.DISPLAY;
-    private String build_id = System.getProperty(lineage_property, "none");
-
+    private String build_id = SystemProperties.get(lineage_property, "none");
     private String result = "";
 
     SendToServer sendToServer;
@@ -212,17 +212,17 @@ public class StatServer {
                     if (DEBUG) Log.i(TAG, " StatServer - answer server OK");
                     if (("null".equals(id_build) || "".equals(id_build)) ||
                             ("true".equals(id_stats) && !build_id.equals(id_build))) {
-                        System.setProperty(build_property, build_id);
+                        SystemProperties.set(build_property, build_id);
                     }
                     if ("false".equals(id_stats) || "".equals(id_stats)) {
-                        System.setProperty(stats_property, "true");
+                        SystemProperties.set(stats_property, "true");
                     }
                     if (DEBUG) Log.i(TAG, " StatServer - id_build: " + id_build);
                     if (DEBUG) Log.i(TAG, " StatServer - id_stats: " + id_stats);
                 }
             } catch (Exception e) {
                 if (DEBUG) Log.i(TAG, " StatServer - error connection: " + e.getMessage());
-                System.setProperty(stats_property, "false");
+                SystemProperties.set(stats_property, "false");
             } finally {
                 conn.disconnect();
                 //stopSelf();
-- 
2.20.1

